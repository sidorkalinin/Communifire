{"version":3,"sources":["../../src/pages/manage-friend/manage-friend.module.ts","../../src/pages/manage-friend/manage-friend.ts"],"names":[],"mappings":"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","file":"42.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ManageFriendPage } from './manage-friend';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { PipesModule } from '../../pipes/pipes.modules';\r\nimport { PeopleProvider } from '../../providers/people';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ManageFriendPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ManageFriendPage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    PeopleProvider,\r\n    AppCenterAnalytics\r\n  ]\r\n})\r\nexport class ManageFriendPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/manage-friend/manage-friend.module.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, ViewController, NavParams, InfiniteScroll, NavController, Refresher, ToastController, LoadingController } from 'ionic-angular';\r\nimport 'rxjs/add/operator/finally';\r\nimport 'rxjs/add/operator/do';\r\n\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PeopleProvider } from '../../providers/people';\r\n\r\n/**\r\n * Generated class for the ManageFriendPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: 'manage-friend',\r\n})\r\n@Component({\r\n  selector: 'page-manage-friend',\r\n  templateUrl: 'manage-friend.html',\r\n})\r\nexport class ManageFriendPage implements OnInit {\r\n  communityUrl = localStorage.getItem('community_url');\r\n  isLoading: boolean = false;\r\n  isLoadingFriends: boolean = false;\r\n  isLoadingRequests: boolean = false;\r\n  friendView: number = this.navParams.get('isRequest')?1: 0;\r\n  searchtext = '';\r\n  issearch = false;\r\n  space;\r\n  userFriends = [];\r\n  searchFriends = [];\r\n  private cachePeople = [];\r\n  friendRequestUsers = [];\r\n  private peoplePage = 1;\r\n  private requestPage = 1;\r\n\r\n  buttons = [    \r\n    {\r\n      icon: 'ios-people',\r\n      text: 'EXTRA.CONNECTIONS'\r\n    }, {\r\n      icon: 'ios-contact',\r\n      text: 'EXTRA.CONNECTIONREQUEST'\r\n    }, \r\n  ];\r\n\r\n  constructor(\r\n    public viewCtrl: ViewController,\r\n    public navParams: NavParams,\r\n    private peopleProvider: PeopleProvider,\r\n    private navCtrl: NavController,\r\n    public translate: TranslateService,\r\n    private toastCtrl: ToastController,\r\n    public loadingCtrl: LoadingController,\r\n  ) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    \r\n  }\r\n  ngOnInit() {\r\n    if(this.friendView == 0) {\r\n      this.getFriends();\r\n    } else {\r\n      this.getRequests();\r\n    }\r\n  }\r\n\r\n  switchFriendView(view) {\r\n    this.friendView = view.index;\r\n    if (this.friendView === 0) {\r\n      this.getFriends();\r\n    } else if (this.friendView === 1) {      \r\n      this.getRequests();      \r\n    }\r\n  }\r\n\r\n  getRequests(infiniteScroll?: InfiniteScroll) {\r\n    if (infiniteScroll) {\r\n      ++this.requestPage;\r\n    }\r\n    if(!infiniteScroll && this.friendRequestUsers.length > 0) {\r\n      return;\r\n    }\r\n\r\n    if (infiniteScroll && this.friendRequestUsers.length > 0 && this.friendRequestUsers.length < 15) {\r\n      infiniteScroll.enable(false);\r\n      return;\r\n    }\r\n\r\n\r\n    // Fetch Space user by Id\r\n    this.isLoadingRequests = true;\r\n    this.peopleProvider.getRequests(localStorage.getItem('UserID'), this.requestPage, 15)\r\n      .finally(() => {\r\n        this.isLoadingRequests = false\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        }\r\n      })\r\n      .do(response => {\r\n        if (infiniteScroll && !response.ResponseData.length) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n      .subscribe(res => {\r\n        if(res.ResponseData && res.ResponseData.length > 0) {\r\n          this.friendRequestUsers = this.friendRequestUsers.concat(res.ResponseData);\r\n        } \r\n      });\r\n  }\r\n\r\n  getFriends(infiniteScroll?: InfiniteScroll) {\r\n    if (infiniteScroll) {\r\n      ++this.peoplePage;\r\n    }\r\n    if(!infiniteScroll && this.userFriends.length > 0) {\r\n      return;\r\n    }\r\n\r\n    if (infiniteScroll && this.userFriends.length > 0 && this.userFriends.length < 15) {\r\n      infiniteScroll.enable(false);\r\n      return;\r\n    }\r\n\r\n    this.isLoadingFriends = true;\r\n    // Fetch Space user by Id\r\n    this.peopleProvider.getFriends(localStorage.getItem('UserID'), this.peoplePage, 15)\r\n      .finally(() => {\r\n        if (!infiniteScroll) {\r\n          this.isLoadingFriends = false\r\n        }\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        }\r\n      })\r\n      .do(response => {\r\n        if (infiniteScroll && !response.ResponseData.length) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n      .subscribe(res => {\r\n        console.log(res.ResponseData);\r\n        if(res.ResponseData && res.ResponseData.length > 0) {\r\n          this.userFriends = this.userFriends.concat(res.ResponseData);\r\n          this.searchFriends = this.userFriends;\r\n          if (res.ResponseData.length < 15 && infiniteScroll) {\r\n            infiniteScroll.enable(false);\r\n          }\r\n        } else {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      });\r\n  }\r\n\r\n  search(name: any) {\r\n    console.log(name);\r\n    if(name.length == 0) {\r\n      this.searchFriends = this.userFriends;\r\n    } else {\r\n      this.searchFriends = this.userFriends.filter(v => {\r\n        return v.UserInfoDisplayName.toLowerCase().indexOf(name.toLowerCase()) !== -1 \r\n      })\r\n    }\r\n    this.issearch = false;\r\n  }\r\n\r\n  approve(person: any) {\r\n    const saveloader = this.loadingCtrl.create({\r\n    });      \r\n    saveloader.present();\r\n    this.peopleProvider.aproveFriend(localStorage.getItem('UserID'), person.UserID)\r\n      .finally(() => {\r\n        saveloader.dismiss();\r\n      })\r\n      .subscribe(res => {\r\n        console.log(res);\r\n        if(res.IsError == false) {\r\n          this.friendRequestUsers = this.friendRequestUsers.filter(v => {\r\n            return v.UserID != person.UserID;\r\n          })\r\n          this.translate.get(\"EXTRA.REQUEST_ACCEPTED\").subscribe(res => {\r\n            this.presentToast(res);\r\n          });\r\n        } else {\r\n          this.translate.get(\"TOAST.ERROR\").subscribe(res => {\r\n            this.presentToast(res);\r\n          });\r\n        }\r\n      })\r\n  }\r\n\r\n  decline(person: any) {\r\n    const saveloader = this.loadingCtrl.create({      \r\n    });      \r\n    saveloader.present();\r\n    this.peopleProvider.declineFriend(localStorage.getItem('UserID'), person.UserID)\r\n      .finally(() => {\r\n        saveloader.dismiss();\r\n      })\r\n      .subscribe(res => {\r\n        console.log(res);\r\n        if(res.IsError == false) {\r\n          this.friendRequestUsers = this.friendRequestUsers.filter(v => {\r\n            return v.UserID != person.UserID;\r\n          })\r\n          this.translate.get(\"EXTRA.REQUEST_REJECTED\").subscribe(res => {\r\n            this.presentToast(res);\r\n          });\r\n        } else {\r\n          this.translate.get(\"TOAST.ERROR\").subscribe(res => {\r\n            this.presentToast(res);\r\n          });\r\n        }\r\n      })\r\n  }\r\n\r\n  private presentToast(msg) {\r\n    let toast = this.toastCtrl.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      position: 'bottom'\r\n    });\r\n    toast.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/manage-friend/manage-friend.ts"],"sourceRoot":""}