{"version":3,"sources":["../../src/pages/photos/photo-edit/photo-edit.module.ts","../../src/pages/photos/photo-edit/photo-edit.ts"],"names":[],"mappings":"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","file":"36.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { PhotoEditPage } from './photo-edit';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PhotoEditPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PhotoEditPage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n})\r\nexport class PhotoEditPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photos/photo-edit/photo-edit.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Content, LoadingController } from 'ionic-angular';\r\nimport { ContentProvider } from '../../../providers/content';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n/**\r\n * Generated class for the PhotoEditPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: 'photo-edit',\r\n  segment: 'photo-edit'\r\n})\r\n@Component({\r\n  selector: 'page-photo-edit',\r\n  templateUrl: 'photo-edit.html',\r\n})\r\nexport class PhotoEditPage {\r\n  contentTitle: any;\r\n  contentSummary: any;\r\n  contentBody: any;\r\n  metaTitle: any;\r\n  metaDescription: any;\r\n  images: any;\r\n  \r\n  spaceId:any;\r\n  contentId: any;\r\n  //Loading Controller\r\n  loader: any;\r\n\r\n  //Add Tag\r\n  newtag: any;\r\n  tags: any = [];\r\n\r\n  //Validation\r\n  titleClass: string;\r\n  summaryClass: string;\r\n  bodyClass: string;\r\n\r\n  @ViewChild(Content) content: Content;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams, \r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public translate: TranslateService\r\n  ){\r\n    this.contentId = this.navParams.get('contentId');\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.translate.get(\"COMMONS.LOADING\").subscribe(res => {\r\n      this.loader = this.loadingCtrl.create({\r\n        content: res,\r\n      });      \r\n      this.loader.present();\r\n      this.getContentById();      \r\n    });\r\n  }\r\n\r\n  getContentById(){\r\n    this.contentProvider.getContentByID(this.contentId)\r\n      .finally(this.loader.dismiss())\r\n      .subscribe(res => {\r\n        let contentData = res.ResponseData;\r\n        this.contentTitle = contentData.ContentTitle;\r\n        this.contentBody = contentData.ContentBody;\r\n        this.contentSummary = contentData.ContentSummary;\r\n        this.spaceId = contentData.SpaceID;\r\n        this.metaTitle = contentData.MetaTitle;\r\n        this.metaDescription = contentData.MetaDescription;\r\n        this.tags = contentData.TagsCSV.split(',');        \r\n      });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad PhotoCreatePage');\r\n  }\r\n\r\n  //Set Tag\r\n  setTags(tags){\r\n    this.tags = tags;\r\n  }\r\n\r\n  //Set MetaInfo\r\n  setMetaInformation(meta){\r\n    this.metaTitle = meta.metaTitle;\r\n    this.metaDescription = meta.metaDescription;\r\n  }\r\n\r\n  //Image File\r\n  setFiles(files) {\r\n    this.images = files;\r\n  }\r\n  // Element not validated gets focus\r\n  getFocus(){\r\n    this.titleClass = '';\r\n    this.summaryClass = '';\r\n    this.bodyClass = '';\r\n  }\r\n\r\n  navToList(){\r\n    let active = this.navCtrl.getActive();\r\n    let parent = this.navCtrl.getPrevious();\r\n\r\n    this.navCtrl.push('photos', {\r\n      id: this.contentId\r\n    }, {\r\n      direction: \"back\"\r\n    });\r\n    \r\n    this.navCtrl.removeView(active);\r\n    this.navCtrl.removeView(parent);\r\n  }\r\n\r\n  cancel(){\r\n    this.navCtrl.pop();\r\n  }\r\n  \r\n  save(){\r\n    if(this.contentTitle == undefined){\r\n      this.titleClass = 'red';      \r\n      let yOffset = document.getElementById('headline').offsetTop;\r\n      this.content.scrollTo(0, yOffset-50, 1000);\r\n      return;\r\n    }else if(this.contentSummary == undefined){\r\n      this.summaryClass ='red';\r\n      let yOffset = document.getElementById('summary').offsetTop;\r\n      this.content.scrollTo(0, yOffset-50, 1000);\r\n      return;\r\n    }\r\n\r\n    let body = {\r\n      'ContentTitle': this.contentTitle,\r\n      'ContentBody': this.contentBody,\r\n      'ContentSummary': this.contentSummary,\r\n      'MetaTitle': this.metaTitle,\r\n      'MetaDescription': this.metaDescription,\r\n      'TagsCSV': this.tags.join(','),\r\n    }\r\n\r\n    const loader = this.loadingCtrl.create({      \r\n    });      \r\n    loader.present();\r\n\r\n    this.contentProvider.updateContent(this.contentId, JSON.stringify(JSON.stringify(body)))\r\n    .finally(() => {     \r\n      loader.dismiss(); \r\n      this.navToList();\r\n    })\r\n    .subscribe(res => {\r\n      this.uploadPhoto(res.ResponseData);\r\n    })\r\n  }\r\n\r\n  uploadPhoto(c_id){\r\n    for(var i = 0; i < this.images.length; i++){\r\n      this.contentProvider.uploadAlbumPhoto({\r\n        'fullPath': this.images[i].path,\r\n        'name': this.images[i].filename,\r\n        'contentID': c_id\r\n      })\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photos/photo-edit/photo-edit.ts"],"sourceRoot":""}