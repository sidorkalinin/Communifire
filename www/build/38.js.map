{"version":3,"sources":["../../src/pages/photos/photo-create/photo-create.module.ts","../../src/pages/photos/photo-create/photo-create.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { PhotoCreatePage } from './photo-create';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PhotoCreatePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PhotoCreatePage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n})\r\nexport class PhotoCreatePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photos/photo-create/photo-create.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, Content, LoadingController } from 'ionic-angular';\r\nimport { ContentProvider } from '../../../providers/content';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n/**\r\n * Generated class for the PhotoCreatePage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: 'photo-create',\r\n  segment: 'photo-create/:id'\r\n})\r\n@Component({\r\n  selector: 'page-photo-create',\r\n  templateUrl: 'photo-create.html',\r\n})\r\nexport class PhotoCreatePage {\r\n  navTitle: any;\r\n  contentTitle: any;\r\n  contentSummary: any;\r\n  contentBody: any;\r\n  metaTitle: any;\r\n  metaDescription: any;\r\n  images: any;\r\n\r\n  spaceId:any;\r\n\r\n  //Add Tag\r\n  newtag: any;\r\n  tags: any = [];\r\n\r\n  //Validation\r\n  titleClass: string;\r\n  summaryClass: string;\r\n  bodyClass: string;\r\n\r\n  @ViewChild(Content) content: Content;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams, \r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public translate: TranslateService\r\n  ){\r\n    this.spaceId =  this.navParams.get('spaceId');\r\n    this.navTitle = this.navParams.get('title');\r\n  }\r\n\r\n  async ngOnInit() {\r\n    this.translate.get(\"COMMONS.LOADING_ARTICLE\").subscribe(res => {\r\n      const loader = this.loadingCtrl.create({\r\n        content: res,\r\n      });      \r\n      loader.present();\r\n      loader.dismiss();\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad PhotoCreatePage');\r\n  }\r\n\r\n  //Set Tag\r\n  setTags(tags){\r\n    this.tags = tags;\r\n  }\r\n\r\n  //Set MetaInfo\r\n  setMetaInformation(meta){\r\n    this.metaTitle = meta.metaTitle;\r\n    this.metaDescription = meta.metaDescription;\r\n  }\r\n\r\n  //Image File\r\n  setFiles(files) {\r\n    this.images = files;\r\n  }\r\n\r\n  // Element not validated gets focus\r\n  getFocus(){\r\n    this.titleClass = '';\r\n    this.summaryClass = '';\r\n    this.bodyClass = '';\r\n  }\r\n\r\n  navToList(){\r\n    let active = this.navCtrl.getActive();\r\n    let parent = this.navCtrl.getPrevious();\r\n\r\n    this.navCtrl.push(\"photo-list\", {\r\n      title: this.navTitle,\r\n      SpaceID: this.spaceId\r\n    }, {\r\n      direction: \"back\"\r\n    });\r\n    \r\n    this.navCtrl.removeView(active);\r\n    this.navCtrl.removeView(parent);\r\n  }\r\n\r\n  cancel(){\r\n    this.navCtrl.pop();\r\n  }\r\n  \r\n  save(){\r\n    if(this.contentTitle == undefined){\r\n      this.titleClass = 'red';      \r\n      let yOffset = document.getElementById('headline').offsetTop;\r\n      this.content.scrollTo(0, yOffset-50, 1000);\r\n      return;\r\n    }else if(this.contentSummary == undefined){\r\n      this.summaryClass ='red';\r\n      let yOffset = document.getElementById('summary').offsetTop;\r\n      this.content.scrollTo(0, yOffset-50, 1000);\r\n      return;\r\n    }\r\n\r\n    //let tagscsv = this.tags.join(',');\r\n    let body = {\r\n      'EntityType': 18,\r\n      'SpaceID': this.spaceId,\r\n      'ContentTitle': this.contentTitle,\r\n      'ContentSummary': this.contentSummary,\r\n      'MetaTitle': this.metaTitle,\r\n      'MetaDescription': this.metaDescription,\r\n    }\r\n    this.contentProvider.createContent(JSON.stringify(body))\r\n    .finally(() => {\r\n      this.navToList();\r\n    })\r\n    .subscribe(res => {\r\n      console.log(res.ResponseData);\r\n      this.uploadPhoto(res.ResponseData);\r\n    })\r\n  }\r\n  uploadPhoto(c_id){\r\n    for(var i = 0; i < this.images.length; i++){\r\n      this.contentProvider.uploadAlbumPhoto({\r\n        'fullPath': this.images[i].path,\r\n        'name': this.images[i].filename,\r\n        'contentID': c_id\r\n      })\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/photos/photo-create/photo-create.ts"],"sourceRoot":""}