{"version":3,"sources":["../../src/pages/wallpost/wallpost-detail/wallpost-detail.module.ts","../../src/pages/wallpost/wallpost-detail/wallpost-detail.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { WallpostDetailPage } from './wallpost-detail';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine';\r\nimport { Vibration } from '@ionic-native/vibration';\r\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WallpostDetailPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(WallpostDetailPage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    TapticEngine,\r\n    InAppBrowser,\r\n    Vibration\r\n  ]\r\n})\r\nexport class WallpostDetailPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallpost/wallpost-detail/wallpost-detail.module.ts","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, LoadingController, InfiniteScroll, Refresher } from 'ionic-angular';\r\nimport { ContentProvider } from '../../../providers/content'\r\nimport 'rxjs/add/operator/finally';\r\nimport 'rxjs/add/operator/do';\r\nimport { CommentModalComponent } from '../../../components/comment-modal/comment-modal';\r\nimport { SingleContentLikeComponent } from '../../../components/single-content-like/single-content-like';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine'; \r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform } from 'ionic-angular';\r\nimport { InAppBrowser, InAppBrowserOptions } from \"@ionic-native/in-app-browser\";\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\n@IonicPage({\r\n  name: 'wallpost',\r\n  segment: 'wallpost/:id'\r\n})\r\n\r\n@Component({\r\n  selector: 'page-wallpost-detail',\r\n  templateUrl: 'wallpost-detail.html',\r\n})\r\nexport class WallpostDetailPage implements OnInit {\r\n\r\n  private contentId = this.navParams.get('id');\r\n  contentDetail;\r\n  likesCount: any;\r\n  isRefreshing: boolean = false;\r\n  infiniteScroll: InfiniteScroll;\r\n\r\n  @ViewChild (SingleContentLikeComponent) singleComponentLikeComponent: SingleContentLikeComponent;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public taptic: TapticEngine,\r\n    public iab: InAppBrowser,\r\n    public vibration: Vibration,\r\n    public platform: Platform,\r\n    public translate: TranslateService\r\n  ) {}\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getUserByContentId();\r\n    // this.getComments();\r\n  }\r\n\r\n  setCount($event){\r\n    this.likesCount = $event;\r\n  }\r\n\r\n  openBrowser(link){\r\n    let domain = localStorage.getItem(\"community_url\");\r\n    const options: InAppBrowserOptions = {\r\n      location: \"yes\"\r\n    };\r\n    this.iab.create(domain + link, \"_system\", options);\r\n  }\r\n\r\n  getUserByContentId() {\r\n    this.translate.get(\"COMMONS.LOADING_WALLPOST\").subscribe(res => {\r\n      let loading = this.loadingCtrl.create({\r\n        content: res\r\n      });\r\n      loading.present();\r\n  \r\n      this.contentProvider.getWallPost(this.contentId)\r\n      .finally(() => loading.dismiss())\r\n      .subscribe(res => {\r\n        this.contentDetail = res.ResponseData;\r\n        console.log(this.contentDetail);\r\n      })\r\n    });\r\n    \r\n  }\r\n\r\n  page: number = 0;\r\n  comments: any = [];\r\n\r\n  doRefresh(refresher?: Refresher){\r\n    if(this.infiniteScroll){\r\n      this.infiniteScroll.enable(true);\r\n    }\r\n    this.taptic.impact({ style: 'light' }); \r\n    this.vibrate();\r\n    this.contentProvider.getWallPost(this.contentId)\r\n    .finally(() => refresher.complete())\r\n    .subscribe(res => {\r\n      this.contentDetail = res.ResponseData;\r\n      this.singleComponentLikeComponent.getLikeCount();\r\n    })\r\n    // this.page = 1;\r\n    // this.comments = [];\r\n    // this.contentProvider.getContentComments(this.contentId, this.page)\r\n    //   .subscribe(res => {\r\n    //     this.handleComments(res);\r\n    //   })\r\n  }\r\n\r\n  // getComments(infiniteScroll?: InfiniteScroll){\r\n  //   if(infiniteScroll){\r\n  //     this.infiniteScroll = infiniteScroll;\r\n  //   }\r\n  //   if (this.comments.length == 0 && infiniteScroll){\r\n  //     infiniteScroll.enable(false);\r\n  //   }\r\n  //   if (this.comments.length >= 0 && this.comments.length < 10 && infiniteScroll){\r\n  //     infiniteScroll.enable(false);\r\n  //   }\r\n  //   this.page++;\r\n\r\n  //   this.contentProvider.getContentComments(this.contentId, this.page)\r\n  //     .finally(() => {\r\n  //       if (infiniteScroll) {\r\n  //         infiniteScroll.complete();\r\n  //       }\r\n  //     })\r\n  //     .do(response => {\r\n  //       if (!response.ResponseData && infiniteScroll) {\r\n  //         infiniteScroll.enable(false);\r\n  //         this.page--; // Restore page back to the last correct page\r\n  //       }\r\n  //     })\r\n  //     .subscribe(res => {\r\n  //       this.handleComments(res);\r\n  //       if (res.ResponseData && res.ResponseData.length < 10 && infiniteScroll){\r\n  //         infiniteScroll.enable(false);\r\n  //       }\r\n  //     })\r\n  // }\r\n\r\n  // private handleComments(response) {\r\n  //   if (response.ResponseData){\r\n  //     this.comments = this.comments.concat(response.ResponseData);\r\n  //     this.comments = this.contentProvider.getNestedChildren(this.comments, 0);\r\n  //   }\r\n  // }\r\n\r\n  getTitle(){\r\n    return \"TITLES.WALLPOST\";\r\n  }\r\n\r\n  openModal($event?) {\r\n    let data = {\r\n      entity: this.contentDetail,\r\n    };\r\n    if ($event){\r\n      data['parentComment'] = $event;\r\n    }\r\n    let modal = this.modalCtrl.create(CommentModalComponent, data);\r\n    modal.present();\r\n    modal.onDidDismiss(data => {\r\n      // this.comments = data.comments;\r\n      this.contentDetail.CommentCount += data.count;\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/wallpost/wallpost-detail/wallpost-detail.ts"],"sourceRoot":""}