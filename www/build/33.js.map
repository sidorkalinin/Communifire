{"version":3,"sources":["../../src/pages/search/search.module.ts","../../src/pages/search/search.ts"],"names":[],"mappings":"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","file":"33.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SearchPage } from './search';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { PipesModule } from '../../pipes/pipes.modules';\r\nimport { Vibration } from '@ionic-native/vibration';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SearchPage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    Vibration,\r\n    AppCenterAnalytics,\r\n  ]\r\n})\r\nexport class SearchPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, InfiniteScroll, Refresher } from 'ionic-angular';\r\nimport { ContentProvider } from '../../providers/content';\r\nimport 'rxjs/add/operator/do';\r\nimport 'rxjs/add/operator/finally';\r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform } from 'ionic-angular';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\n\r\n/**\r\n * Generated class for the SearchPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: 'page-search'\r\n})\r\n@Component({\r\n  selector: 'page-search',\r\n  templateUrl: 'search.html',\r\n})\r\nexport class SearchPage {\r\n  searchfilter: string = \"\";\r\n  page: number = 0;\r\n  isLoading: boolean = false;\r\n  isLoadingSearch: boolean = false;\r\n  activities: any = [];\r\n  infinteScroll: InfiniteScroll;\r\n  searchPage: number = 0;\r\n  searchEntities: any = [];\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public content: ContentProvider,\r\n    public vibration: Vibration,\r\n    public platform: Platform,\r\n    private appCenterAnalytics: AppCenterAnalytics\r\n  ) {\r\n    this.appCenterAnalytics.isEnabled().then( (b) => {\r\n      if(b){\r\n        this.appCenterAnalytics.trackEvent('Search Page Load Event.', {userid: localStorage.getItem('UserID') }).then(() => {\r\n          console.log('Search Page Load Event tracked');\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n  }\r\n\r\n  doRefresh(refresher?: Refresher){\r\n    if(this.searchfilter.length === 0){\r\n      this.activities = [];\r\n      refresher.complete();\r\n      return 0;\r\n    }\r\n    this.page = 1;\r\n    this.activities = [];\r\n    refresher.complete();\r\n    this.isLoadingSearch = true;\r\n    this.content.searchByKeyword(this.searchfilter, this.page)\r\n      .finally(() => {\r\n        this.isLoadingSearch = false;\r\n      })\r\n      .do((response: any) => {\r\n        \r\n      })\r\n      .subscribe(response => {\r\n        this.activities = this.activities.concat(response.ResponseData);        \r\n      }, err => {\r\n      });\r\n  }\r\n\r\n  doInfinite(infiniteScroll?: InfiniteScroll) {    \r\n    if(this.searchfilter.length > 0 && infiniteScroll){\r\n      this.search(infiniteScroll);\r\n      return 0;\r\n    }\r\n  }\r\n\r\n\r\n  search(infiniteScroll?: InfiniteScroll){\r\n    if(this.searchfilter.length === 0){\r\n      this.activities = [];\r\n      return 0;\r\n    }\r\n    if(infiniteScroll){\r\n      this.infinteScroll = infiniteScroll;\r\n    } else {\r\n      this.page = 0;\r\n      this.activities = [];\r\n    }\r\n    if (this.activities.length != 0 && this.activities.length < 10){\r\n      infiniteScroll.enable(false);\r\n      return 0;\r\n    }\r\n    ++this.page;\r\n\r\n    if (!infiniteScroll) {\r\n      this.isLoadingSearch = true;\r\n    }\r\n\r\n    this.content.searchByKeyword(this.searchfilter, this.page)\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        } else {\r\n          this.isLoadingSearch = false;\r\n        }\r\n      })\r\n      .do((response: any) => {\r\n        if (!response.ResponseData.length && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n      .subscribe(response => {\r\n        console.log(response.ResponseData);\r\n        this.activities = this.activities.concat(response.ResponseData);\r\n        if (infiniteScroll && response.ResponseData.length < 10){\r\n          infiniteScroll.enable(false);\r\n        }\r\n      }, err => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.enable(false)\r\n        }\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.ts"],"sourceRoot":""}