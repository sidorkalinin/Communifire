{"version":3,"sources":["../../src/pages/disscusions/discussion-item/discussion-item.module.ts","../../src/pages/disscusions/discussion-item/discussion-item.ts"],"names":[],"mappings":"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","file":"53.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { DiscussionItemPage } from './discussion-item';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DiscussionItemPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(DiscussionItemPage),\r\n    TranslateModule,\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n})\r\nexport class DiscussionItemPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/disscusions/discussion-item/discussion-item.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, LoadingController } from 'ionic-angular';\r\nimport { ContentProvider } from \"../../../providers/content\";\r\nimport { SpacesProvider } from \"../../../providers/spaces\";\r\nimport { ForumTopicCommentModalComponent } from \"../../../components/forum-topic-comment-modal/forum-topic-comment-modal\";\r\nimport { TapticEngine } from '@ionic-native/taptic-engine'; \r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform, Refresher } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Device } from '@ionic-native/device';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\n\r\n@IonicPage({\r\n  name: \"discussion-item\",\r\n  segment: \"discussion-item/:id\"\r\n})\r\n@Component({\r\n  selector: 'page-discussion-item',\r\n  templateUrl: 'discussion-item.html',\r\n})\r\nexport class DiscussionItemPage {\r\n\r\n  id: number = this.navParams.get('id');\r\n  sort = 0;\r\n\r\n  content: any = [];\r\n\r\n  comments: any = [];\r\n  loader: any;\r\n\r\n  canedit: boolean = false;\r\n  isIos: boolean = false;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams, \r\n    public contentProvider: ContentProvider,\r\n    public spacesProvider: SpacesProvider,\r\n    public modalCtrl: ModalController,\r\n    public taptic: TapticEngine,\r\n    public vibration: Vibration,\r\n    public platform: Platform,\r\n    public translate: TranslateService,\r\n    public loadingCtrl: LoadingController,\r\n    public device: Device,\r\n    private sanitizer: DomSanitizer\r\n  ) {\r\n    this.translate.get(\"COMMONS.LOADING_DISCUSSION\").subscribe(res => {\r\n      this.loader = this.loadingCtrl.create({\r\n        content: res,\r\n      });\r\n      this.loader.present();\r\n      this.getContent();\r\n    });\r\n    if (this.device.model === \"iPhone10,3\" || this.device.model === \"iPhone10,6\" || this.device.model === \"iPhone10;3\" || this.device.model === \"iPhone10;6\") {\r\n      this.isIphoneX = true;\r\n    }\r\n    if(this.platform.is(\"ios\")) {\r\n      this.isIos = true;\r\n    }\r\n  }\r\n    \r\n  isIphoneX: boolean = false;\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  getContent(refresher?: Refresher){\r\n    if (refresher) {\r\n      this.taptic.impact({ style: 'light' }); \r\n      this.vibrate();\r\n    }\r\n    this.contentProvider.getContentByID(this.id).finally(() => {\r\n      if (refresher) {\r\n        refresher.complete();\r\n      }\r\n    }).subscribe(res => {\r\n      this.content = res.ResponseData;\r\n      this.content.ContentBody = this.sanitizer.bypassSecurityTrustHtml(this.content.ContentBody);\r\n      console.log(this.content);\r\n      this.checkPermission();\r\n      if(this.content.SpaceID == 0){\r\n        this.getSpace(0);\r\n      }\r\n      this.getCommentList();\r\n    });\r\n  }\r\n\r\n  getCommentList(){\r\n    let data = {\r\n      EntityType: 54,\r\n      SpaceID: this.content.SpaceID,\r\n      ParentContentID: this.content.ContentID\r\n    }\r\n    this.contentProvider.getContentList(data).subscribe(res => {\r\n      this.comments = res.ResponseData;\r\n      this.comments.pop();\r\n      this.sortByDate();\r\n      this.loader.dismiss();\r\n    })\r\n  }\r\n\r\n  getSpace(id: number){\r\n    this.spacesProvider.getSpace(id).subscribe((res) => {\r\n      this.content[\"SpaceName\"] = res.SpaceName;\r\n    });\r\n  }\r\n\r\n  public sortByDate(): void {\r\n    this.comments.sort((a: any, b: any) => {\r\n      return new Date(a.DateCreated).getTime() - new Date(b.DateCreated).getTime();\r\n    });\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n  }\r\n\r\n  openModal(){\r\n    if(this.content.LockedByUserID != 0) return;\r\n    const modal = this.modalCtrl.create(ForumTopicCommentModalComponent, {\r\n      id: this.content.ContentID,\r\n      forumTopic: this.content\r\n    });\r\n    modal.onDidDismiss(data => {\r\n      this.getCommentList();\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  likes: any;\r\n\r\n  setCount($event){\r\n    this.likes = $event;\r\n  }\r\n\r\n  goToProfile(){\r\n    this.navCtrl.push(\"profile\", {\r\n      id: this.content.AuthorID\r\n    });\r\n  }\r\n\r\n  \r\n  cancel(){\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n  checkPermission(){\r\n    if(this.content.AuthorID == localStorage.getItem('UserID')){\r\n      this.contentProvider.checkPermission({\r\n        entitytype: 1,\r\n        spaceid: this.content.SpaceID,\r\n      })\r\n      .finally(()=>{      \r\n      })\r\n      .subscribe(res =>{\r\n        this.canedit = res.ResponseData.update;\r\n      })\r\n    }else{\r\n      this.contentProvider.checkPermission({\r\n        entitytype: 1,\r\n        spaceid: this.content.SpaceID,\r\n      })\r\n      .finally(()=>{      \r\n      })\r\n      .subscribe(res =>{\r\n        this.canedit = res.ResponseData.AdminEntityUpdate;\r\n      })\r\n    }\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/disscusions/discussion-item/discussion-item.ts"],"sourceRoot":""}