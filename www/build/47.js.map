{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"47.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../components/components.module';\r\nimport { SpacesProvider } from '../../providers/spaces';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { PipesModule } from '../../pipes/pipes.modules'\r\nimport { HomePage } from './home';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomePage),\r\n    IonicPageModule,\r\n    TranslateModule,\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    SpacesProvider,\r\n    SplashScreen\r\n  ]\r\n})\r\nexport class HomePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, NavController, MenuController, InfiniteScroll, LoadingController, Refresher } from 'ionic-angular';\r\nimport 'rxjs/add/operator/do';\r\nimport 'rxjs/add/operator/finally';\r\n\r\nimport { AuthenticationProvider } from '../../providers/authentication';\r\nimport { ContentProvider } from '../../providers/content';\r\nimport { SpacesProvider } from '../../providers/spaces';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine'; \r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform } from 'ionic-angular';\r\n\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\n\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\n\r\n\r\n@IonicPage({\r\n  name: 'home'\r\n})\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html',\r\n})\r\nexport class HomePage implements OnInit {\r\n  private page: number = 0;\r\n  activities = [];\r\n  currentSpace: any = 'null';\r\n  spacesList: any = [];\r\n  isLoading: boolean = false;\r\n  isLoadingFirst: boolean = true;\r\n  infiniteScrollTemp: InfiniteScroll;\r\n  selectOptions: any = {\r\n    title: \"\"\r\n  }\r\n\r\n  menuClick(){\r\n    console.log('menu');\r\n  }\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public menu: MenuController,\r\n    private authenticationProvider: AuthenticationProvider,\r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    private spacesProvider: SpacesProvider,\r\n    public taptic: TapticEngine,\r\n    public splashScreen: SplashScreen,\r\n    public translate: TranslateService,\r\n    public vibration: Vibration,\r\n    public platform: Platform\r\n  ) { \r\n    this.translate.get(\"SPACEDETAILS.SELECT_SPACE\").subscribe(trans => {\r\n      this.selectOptions.title = trans;\r\n    });\r\n  }\r\n\r\n  ionViewCanEnter() {\r\n    if(!this.authenticationProvider.getToken()) {\r\n      this.navCtrl.setRoot('login');\r\n    } else {\r\n      this.menu.enable(true, 'authenticated');\r\n      this.splashScreen.hide();\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getNextPageForSpace();\r\n    this.getMySpaces();\r\n  }\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  private getMySpaces () {\r\n    this.spacesProvider.getMySpaces().subscribe((res) => {\r\n      this.spacesList = res;\r\n    });\r\n  }\r\n\r\n  refresherGlobal: Refresher;\r\n\r\n  doRefresh(refresh: Refresher){\r\n    if (refresh){\r\n      this.refresherGlobal = refresh;\r\n      this.taptic.impact({ style: 'light' });\r\n      this.vibrate();\r\n      this.changeSpace();\r\n      // refresh.complete();\r\n    }\r\n  }\r\n\r\n  changeSpace(){\r\n    this.page = 0;\r\n    this.activities = [];\r\n    if (!this.refresherGlobal){\r\n      this.isLoadingFirst = true;\r\n    }\r\n    if (this.currentSpace == 0) {\r\n      this.getNextPage();\r\n    } else {\r\n      this.getNextPageForSpace();\r\n    }\r\n  }\r\n\r\n  getNextPageForSpace(infiniteScroll?: InfiniteScroll){\r\n    if (this.activities.length > 0 && this.activities.length < 10 && infiniteScroll) {\r\n      infiniteScroll.enable(false);\r\n    }\r\n    this.page++;\r\n\r\n    if (this.infiniteScrollTemp){\r\n      this.infiniteScrollTemp.enable(true);\r\n    }\r\n\r\n    if (!infiniteScroll){\r\n      this.isLoading = true;\r\n    } else {\r\n      this. infiniteScrollTemp = infiniteScroll;\r\n    }\r\n\r\n    this.contentProvider.getContentBySpace(this.currentSpace, this.page, 10)\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        } else {\r\n          this.isLoading = false;\r\n          this.isLoadingFirst = false;\r\n        }\r\n        if(this.refresherGlobal){\r\n          this.refresherGlobal.complete();\r\n          this.refresherGlobal = null;\r\n        }\r\n      })\r\n      .do((response: any) => {\r\n        if (!response.ResponseData.length && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n      .subscribe(response => {\r\n        if(this.page == 1){\r\n          this.activities = [];\r\n        }\r\n        this.activities = this.activities.concat(response.ResponseData);\r\n        if (infiniteScroll && response.ResponseData.length < 10){\r\n          infiniteScroll.enable(false);\r\n        }\r\n      }, err => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.enable(false)\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * This will increment this.page number\r\n   * and fetch the page\r\n   * @param infiniteScroll (Optional)\r\n   */\r\n  getNextPage (infiniteScroll?: InfiniteScroll) {\r\n\r\n    this.page++;\r\n\r\n    if (!infiniteScroll){\r\n      this.isLoading = true;\r\n    }\r\n\r\n    this.contentProvider.getActivitiesForMySpace(this.page)\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        } else {\r\n          this.isLoading = false;\r\n          this.isLoadingFirst = false;\r\n        }\r\n        if(this.refresherGlobal){\r\n          this.refresherGlobal.complete();\r\n          this.refresherGlobal = null;\r\n        }\r\n      })\r\n      .do((response: any) => {\r\n        if (!response.ResponseData.length && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n      .subscribe(response => {\r\n        if(this.page == 1){\r\n          this.activities = [];\r\n        }\r\n        this.activities = this.activities.concat(response.ResponseData);\r\n      }, err => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.enable(false)\r\n        }\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}