{"version":3,"sources":["../../src/pages/videos/video-detail/video-detail.module.ts","../../src/pages/videos/video-detail/video-detail.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { VideoDetailPage } from './video-detail';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    VideoDetailPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(VideoDetailPage),\r\n    TranslateModule,\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    AppCenterAnalytics\r\n  ]\r\n})\r\nexport class VideoDetailPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/videos/video-detail/video-detail.module.ts","import { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, LoadingController, InfiniteScroll, Refresher } from 'ionic-angular';\r\nimport { ContentProvider } from '../../../providers/content'\r\nimport { CommentModalComponent } from '../../../components/comment-modal/comment-modal';\r\nimport 'rxjs/add/operator/finally';\r\nimport 'rxjs/add/operator/do';\r\nimport { SingleContentLikeComponent } from '../../../components/single-content-like/single-content-like';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine'; \r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Device } from '@ionic-native/device';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { SafeResourceUrl, DomSanitizer } from '@angular/platform-browser';\r\n\r\n@IonicPage({\r\n\tname: 'videos',\r\n  segment: 'videos/:id'\r\n })\r\n@Component({\r\n  selector: 'page-video-detail',\r\n  templateUrl: 'video-detail.html',\r\n})\r\nexport class VideoDetailPage {\r\n\r\n  private contentId = this.navParams.get('id');\r\n  contentDetail;\r\n  likesCount: any;\r\n  \r\n  infiniteScroll: InfiniteScroll;\r\n  \r\n  canedit: boolean = false;\r\n\r\n  isIframe: boolean = false;\r\n  trustedVideoUrl: SafeResourceUrl;\r\n  isLoadingIframe: boolean = false;\r\n\r\n  @ViewChild (SingleContentLikeComponent) singleComponentLikeComponent: SingleContentLikeComponent;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public taptic: TapticEngine,\r\n    public vibration: Vibration,\r\n    public platform: Platform,\r\n    public translate: TranslateService,\r\n    public device: Device,\r\n    private appCenterAnalytics: AppCenterAnalytics,\r\n    private domSanitizer: DomSanitizer\r\n  ) {\r\n    if (this.device.model === \"iPhone10,3\" || this.device.model === \"iPhone10,6\" || this.device.model === \"iPhone10;3\" || this.device.model === \"iPhone10;6\") {\r\n    this.isIphoneX = true;\r\n    }\r\n  }\r\n\r\n  isIphoneX: boolean = false;\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getUserByContentId();\r\n    this.getComments();\r\n  }\r\n\r\n  setCount($event){\r\n    this.likesCount = $event;\r\n  }\r\n\r\n  dismissLoading() {\r\n    this.isLoadingIframe = false;\r\n  }\r\n\r\n  getUserByContentId() {\r\n    this.translate.get(\"COMMONS.LOADING_VIDEO\").subscribe(res => {\r\n      let loading = this.loadingCtrl.create({\r\n        content: res\r\n      });\r\n      loading.present();\r\n  \r\n      this.contentProvider.getContentByID(this.contentId)\r\n      .finally(() => loading.dismiss())\r\n      .subscribe(res => {\r\n        this.contentDetail = res.ResponseData;\r\n        this.contentDetail.ContentBody = this.domSanitizer.bypassSecurityTrustHtml(this.contentDetail.ContentBody);\r\n        console.log(this.contentDetail);\r\n        if((this.contentDetail.ContentMediaUrl.indexOf(\"youtube.com/\") != -1) || (this.contentDetail.ContentMediaUrl.indexOf(\"youtu.be/\") != -1)) {\r\n          this.isIframe = true;\r\n          if(this.contentDetail.ContentMediaUrl.indexOf('watch?v=') == -1) {\r\n            let ttt = this.contentDetail.ContentMediaUrl.split('/').pop();\r\n            this.contentDetail.ContentMediaUrl = 'https://www.youtube.com/watch?v=' + ttt;\r\n          }\r\n          this.trustedVideoUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(this.contentDetail.ContentMediaUrl.replace('watch?v=', '/embed/'));\r\n          this.isLoadingIframe = true;\r\n        } else if(this.contentDetail.ContentMediaUrl.indexOf('<iframe') != -1) {\r\n          this.isIframe = true;\r\n          let ttt = this.contentDetail.ContentMediaUrl.substring(this.contentDetail.ContentMediaUrl.indexOf('<iframe>'), this.contentDetail.ContentMediaUrl.indexOf('</iframe>'));          \r\n          let srcposition = ttt.indexOf('src=\"') + 5;\r\n          while(ttt[srcposition] != '\"') {\r\n            srcposition++;\r\n          }          \r\n          this.trustedVideoUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(ttt.substring(ttt.indexOf('src=\"')+5, srcposition));\r\n          this.isLoadingIframe = true;\r\n        } else if(this.contentDetail.ContentMediaUrl.indexOf('https://vimeo.com') != -1) {\r\n          this.contentDetail.ContentMediaUrl = this.contentDetail.ContentMediaUrl.replace('https://vimeo.com', 'https://player.vimeo.com/video');\r\n          console.log(this.contentDetail.ContentMediaUrl);\r\n          this.isIframe = true;\r\n          this.trustedVideoUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(this.contentDetail.ContentMediaUrl);\r\n          this.isLoadingIframe = true;\r\n        } else if((this.contentDetail.ContentMediaUrl.indexOf('http://') != -1) || (this.contentDetail.ContentMediaUrl.indexOf('https://') != -1)) {\r\n          this.isIframe = true;\r\n          this.trustedVideoUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(this.contentDetail.ContentMediaUrl);\r\n          this.isLoadingIframe = true;\r\n        } else {\r\n          this.isIframe = false;\r\n        }\r\n        \r\n        this.checkPermission();\r\n\r\n        this.appCenterAnalytics.isEnabled().then( (b) => {\r\n          if(b){\r\n            this.appCenterAnalytics.trackEvent('Video Detail Load.', { id: this.contentId, userid: localStorage.getItem('UserID') }).then(() => {\r\n              console.log('Video Detail Load Event tracked');\r\n            });\r\n          }\r\n        })\r\n      })\r\n    });\r\n  }\r\n\r\n  page: number = 0;\r\n  comments: any = [];\r\n\r\n  doRefresh(refresher?: Refresher){\r\n    if(this.infiniteScroll){\r\n      this.infiniteScroll.enable(true);\r\n    }\r\n    this.taptic.impact({ style: 'light' }); \r\n    this.vibrate();\r\n    this.contentProvider.getContentByID(this.contentId)\r\n    .finally(() => refresher.complete())\r\n    .subscribe(res => {\r\n      this.contentDetail = res.ResponseData;\r\n      if(this.contentDetail.ContentMediaUrl.indexOf(\"youtube.com/\") != -1) {\r\n        this.isIframe = true;\r\n        this.trustedVideoUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(this.contentDetail.ContentMediaUrl.replace('watch?v=', '/embed/'));\r\n      } else {\r\n        this.isIframe = false;\r\n      }\r\n      this.singleComponentLikeComponent.getLikeCount();\r\n    })\r\n    this.page = 1;\r\n    this.comments = [];\r\n    this.contentProvider.getContentComments(this.contentId, this.page)\r\n      .subscribe(res => {\r\n        this.handleComments(res);\r\n      })\r\n  }\r\n\r\n  getComments(infiniteScroll?: InfiniteScroll){\r\n    if(infiniteScroll){\r\n      this.infiniteScroll = infiniteScroll;\r\n    }\r\n    if (this.comments.length >= 0 && this.comments.length < 10 && infiniteScroll){\r\n      infiniteScroll.enable(false);\r\n    }\r\n    this.page++;\r\n\r\n    this.contentProvider.getContentComments(this.contentId, this.page)\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        }\r\n      })\r\n      .do(response => {\r\n        if (!response.ResponseData && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n          this.page--; // Restore page back to the last correct page\r\n        }\r\n      })\r\n      .subscribe(res => {\r\n        this.handleComments(res);\r\n        if (res.ResponseData && res.ResponseData.length < 10 && infiniteScroll){\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n  }\r\n\r\n  private handleComments(response) {\r\n    if (response.ResponseData){\r\n      this.comments = this.comments.concat(response.ResponseData);\r\n      this.comments = this.contentProvider.getNestedChildren(this.comments, 0);\r\n    }\r\n  }\r\n\r\n  getTitle(){\r\n    return \"TITLES.Video\";\r\n  }\r\n\r\n  openModal($event?) {\r\n    let data = {\r\n      entity: this.contentDetail,\r\n    };\r\n    if ($event){\r\n      data['parentComment'] = $event;\r\n    }\r\n    let modal = this.modalCtrl.create(CommentModalComponent, data);\r\n    modal.present();\r\n    modal.onDidDismiss(data => {\r\n      this.comments = data.comments;\r\n      this.contentDetail.CommentCount += data.count;\r\n    });\r\n  }\r\n\r\n  navToList(){\r\n    let active = this.navCtrl.getActive();\r\n    let parent = this.navCtrl.getPrevious();\r\n    if(this.contentDetail.SpaceID === 0){\r\n      this.navCtrl.push(\"video-list\", {\r\n        title: this.contentDetail.ReportedByUserName,\r\n        UserID: this.contentDetail.UserID\r\n      }, {\r\n        direction: \"back\"\r\n      });\r\n    } else {\r\n      this.navCtrl.push(\"video-list\", {\r\n        title: this.contentDetail.SpaceName,\r\n        SpaceID: this.contentDetail.SpaceID\r\n      }, {\r\n        direction: \"back\"\r\n      });\r\n    }\r\n    this.navCtrl.removeView(active);\r\n    this.navCtrl.removeView(parent);\r\n  }\r\n\r\n  cancel(){\r\n    this.navCtrl.pop();\r\n  }\r\n\r\n  checkPermission(){\r\n    if(this.contentDetail.AuthorID == localStorage.getItem('UserID')){\r\n      this.contentProvider.checkPermission({\r\n        entitytype: 7,\r\n        spaceid: this.contentDetail.SpaceID,\r\n      })\r\n      .finally(()=>{      \r\n      })\r\n      .subscribe(res =>{\r\n        this.canedit = res.ResponseData.update;      \r\n      })\r\n    }else{\r\n      this.contentProvider.checkPermission({\r\n        entitytype: 7,\r\n        spaceid: this.contentDetail.SpaceID,\r\n      })\r\n      .finally(()=>{      \r\n      })\r\n      .subscribe(res =>{\r\n        this.canedit = res.ResponseData.AdminEntityUpdate;      \r\n      })\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/videos/video-detail/video-detail.ts"],"sourceRoot":""}