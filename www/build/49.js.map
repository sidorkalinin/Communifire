{"version":3,"sources":["../../src/pages/files/file-detail/file-detail.module.ts","../../src/pages/files/file-detail/file-detail.ts"],"names":[],"mappings":"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","file":"49.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { FileDetailPage } from './file-detail';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ModalModule } from '../../../modals/modals.module';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine';\r\nimport { Vibration } from '@ionic-native/vibration';\r\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\r\nimport { File } from '@ionic-native/file';\r\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { DocumentViewer, DocumentViewerOptions } from '@ionic-native/document-viewer';\r\nimport { FileOpener } from '@ionic-native/file-opener';\r\nimport { PhotoLibrary } from '@ionic-native/photo-library';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    FileDetailPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(FileDetailPage),\r\n    TranslateModule,\r\n    ModalModule,\r\n    ComponentsModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    TapticEngine,\r\n    InAppBrowser,\r\n    Vibration,\r\n    File,\r\n    FileTransfer,\r\n    FileTransferObject,\r\n    AppCenterAnalytics,\r\n    DocumentViewer,\r\n    FileOpener,\r\n    PhotoLibrary\r\n  ]\r\n})\r\nexport class FileDetailPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/files/file-detail/file-detail.module.ts","import { Component, OnInit, ViewChild, NgZone } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ModalController, LoadingController, InfiniteScroll, Refresher, ToastController, normalizeURL, ActionSheetController, AlertController } from 'ionic-angular';\r\nimport { InvitePeopleModalComponent } from '../../../modals/invite-people-modal/invite-people-modal';\r\nimport { ContentProvider } from '../../../providers/content'\r\nimport 'rxjs/add/operator/finally';\r\nimport 'rxjs/add/operator/do';\r\nimport { CommentModalComponent } from '../../../components/comment-modal/comment-modal';\r\nimport { SingleContentLikeComponent } from '../../../components/single-content-like/single-content-like';\r\nimport { TapticEngine } from '@ionic-native/taptic-engine'; \r\nimport { Vibration } from '@ionic-native/vibration'; \r\nimport { Platform } from 'ionic-angular';\r\nimport { InAppBrowser, InAppBrowserOptions } from \"@ionic-native/in-app-browser\";\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\n\r\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\r\nimport { File, FileEntry, IFile } from '@ionic-native/file';\r\nimport { DocumentViewer, DocumentViewerOptions } from '@ionic-native/document-viewer';\r\nimport { FileOpener } from '@ionic-native/file-opener';\r\nimport { FolderSelectModalComponent } from '../../../modals/folder-select-modal/folder-select';\r\nimport { PhotoLibrary } from '@ionic-native/photo-library';\r\nimport { SafeResourceUrl, DomSanitizer } from '@angular/platform-browser';\r\n\r\n@IonicPage({\r\n  name: 'files',\r\n  segment: 'files/:id'\r\n})\r\n@Component({\r\n  selector: 'page-file-detail',\r\n  templateUrl: 'file-detail.html',\r\n})\r\nexport class FileDetailPage implements OnInit {\r\n\r\n  private contentId = this.navParams.get('id');\r\n  contentDetail;\r\n  likesCount: any;\r\n  isRefreshing: boolean = false;\r\n  infiniteScroll: InfiniteScroll;\r\n  communityUrl: string;\r\n  icon:string =  'assets/images/jpg-2.png';\r\n  isLoadingImage : boolean= false;\r\n  p_downLoad: boolean = false;\r\n  isPdf: boolean = false;\r\n  pdfLink: SafeResourceUrl;\r\n\r\n  @ViewChild (SingleContentLikeComponent) singleComponentLikeComponent: SingleContentLikeComponent;\r\n  \r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public modalCtrl: ModalController,\r\n    private contentProvider: ContentProvider,\r\n    public loadingCtrl: LoadingController,\r\n    public taptic: TapticEngine,\r\n    public iab: InAppBrowser,\r\n    public vibration: Vibration,\r\n    public platform: Platform,\r\n    public translate: TranslateService,\r\n    private appCenterAnalytics: AppCenterAnalytics,\r\n    private transfer: FileTransfer,\r\n    private file: File,\r\n    private toastCtrl: ToastController,\r\n    private zone: NgZone,\r\n    private document: DocumentViewer,\r\n    private fileOpener: FileOpener,\r\n    private actionSheetCtrl: ActionSheetController,\r\n    private alertCtrl: AlertController,\r\n    private photoLibrary: PhotoLibrary,\r\n    private domSanitizer: DomSanitizer\r\n  ) {\r\n    this.communityUrl = localStorage.getItem(\"community_url\");\r\n  }\r\n\r\n  vibrate(){\r\n    if(this.platform.is(\"android\")){\r\n      this.vibration.vibrate(50);\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getUserByContentId();\r\n    this.getComments();    \r\n  }\r\n\r\n  setCount($event){\r\n    this.likesCount = $event;\r\n  }\r\n\r\n  adduser() {\r\n    let modal = this.modalCtrl.create(InvitePeopleModalComponent);\r\n    modal.present();\r\n  }\r\n\r\n  getUserByContentId() {\r\n    this.translate.get(\"COMMONS.LOADING_FILE\").subscribe(res => {\r\n      let loading = this.loadingCtrl.create({\r\n        content: res\r\n      });\r\n      loading.present();\r\n  \r\n      this.contentProvider.getContentByID(this.contentId)\r\n      .finally(() => loading.dismiss())\r\n      .subscribe(res => {\r\n        this.zone.run(() => {\r\n          this.contentDetail = res.ResponseData;\r\n          console.log(this.contentDetail);\r\n          if(this.isImage()) this.showImage(this.contentDetail.ContentMediaUrl);\r\n          if(this.checkPdf()) {\r\n            this.isPdf = true;\r\n            let tmp = \"http://docs.google.com/gview?url=\"; //http://remote.url.tld/path/to/document.doc&embedded=true\r\n            tmp += localStorage.getItem(\"community_url\") + '/' + this.contentDetail.ContentMediaUrl + '&embedded=true';\r\n            // console.log(tmp);\r\n            this.pdfLink = this.domSanitizer.bypassSecurityTrustResourceUrl(tmp);\r\n          }\r\n          this.contentProvider.checkPermission({\r\n            entitytype: 14,\r\n            spaceid: this.contentDetail.SpaceID,\r\n          })\r\n          .finally(()=>{\r\n          })\r\n          .subscribe(res =>{\r\n            this.p_downLoad = res.ResponseData.Download;\r\n          })\r\n        });\r\n        \r\n        this.appCenterAnalytics.isEnabled().then( (b) => {\r\n          if(b){\r\n            this.appCenterAnalytics.trackEvent('File Detail Load.', { id: this.contentId, userid: localStorage.getItem('UserID') }).then(() => {\r\n              console.log('File Detail Load Event tracked');\r\n            });\r\n          }\r\n        })\r\n      })\r\n    });\r\n  }\r\n\r\n  dest = '';\r\n  i_url = '';\r\n  showImage(link) {\r\n    let fileTransfer: FileTransferObject = this.transfer.create();\r\n    let domain = localStorage.getItem(\"community_url\");\r\n    let tmp;\r\n    console.log('showimage');\r\n    if(this.platform.is(\"android\")){\r\n      tmp = this.file.externalDataDirectory + \"/tmp/\" + this.contentDetail.ContentTitle;\r\n    } else if(this.platform.is(\"ios\")) {\r\n      tmp = this.file.documentsDirectory+  \"/tmp/\" + this.contentDetail.ContentTitle;\r\n    }\r\n\r\n    let url = localStorage.getItem('community_url');\r\n    let apiKey = localStorage.getItem('communifire_token');\r\n    let options = {\r\n      headers: {\r\n        \"Rest-Api-Key\": apiKey        \r\n      }\r\n    }\r\n    this.isLoadingImage = true;\r\n    fileTransfer.download(encodeURI(domain + link), tmp, true, options).then((entry) => {            \r\n      this.zone.run(() => {\r\n        this.i_url = normalizeURL(tmp);\r\n        this.isLoadingImage = false;\r\n      });\r\n    }, (error) => {\r\n    });    \r\n  }\r\n\r\n  moveToGallery(dest: any) {\r\n    this.photoLibrary.requestAuthorization().then(() => {\r\n      this.photoLibrary.saveImage(dest, \"Communifire\").then((entry=>{\r\n        console.log('download complete: ' + entry.photoURL);\r\n        this.translate.get(\"EXTRA.GALLERYMOVED\").subscribe(res => {\r\n          this.presentToast(res);\r\n        });\r\n      }),\r\n      (error) => {\r\n        // handle error\r\n        console.log('err' + error);\r\n        throw new Error(error);\r\n      });\r\n    })\r\n    .catch(err => console.log('permissions weren\\'t granted'));\r\n  }\r\n\r\n  downloadFile(link){\r\n    let fileTransfer: FileTransferObject = this.transfer.create();\r\n    let domain = localStorage.getItem(\"community_url\");\r\n    \r\n    if(this.platform.is(\"android\")){\r\n      this.dest = this.file.externalDataDirectory + '/Downloads/'+this.contentDetail.SpaceName+'/'+ this.contentDetail.ContentTitle;\r\n    } else if(this.platform.is(\"ios\")) {\r\n      this.dest = this.file.documentsDirectory + '/Downloads/'+this.contentDetail.SpaceName+'/'+ this.contentDetail.ContentTitle;\r\n    }\r\n    \r\n    this.translate.get(\"COMMONS.DOWNLOADSTART\").subscribe(res => {\r\n      this.presentToast(this.contentDetail.ContentTitle + ' ' + res);\r\n    });\r\n\r\n    let url = localStorage.getItem('community_url');\r\n    let apiKey = localStorage.getItem('communifire_token');\r\n    let options = {\r\n      headers: {\r\n        \"Rest-Api-Key\": apiKey        \r\n      }\r\n    }\r\n\r\n    fileTransfer.download(encodeURI(domain + link), this.dest, true, options).then((entry) => {\r\n      console.log('download complete: ' + entry.toURL());\r\n      this.translate.get(\"COMMONS.DOWNLOADED\").subscribe(res => {\r\n        this.presentToast(this.contentDetail.ContentTitle + ' ' + res);\r\n      });\r\n      if(this.isImage()) this.moveToGallery(this.dest);\r\n      const options: DocumentViewerOptions = {\r\n        title: this.contentDetail.ContentTitle\r\n      }\r\n      const onShow = () => {\r\n        console.log('show');\r\n      }\r\n      const onClose = () => {\r\n        console.log('close');\r\n      }\r\n      const onMissingApp = (appId, installer) => {\r\n        this.translate.get(\"COMMONS.INSTALLWARNING\").subscribe(res => {\r\n          if(confirm(\"Do you want to install to Viewer App \"\r\n            + appId + \" ?\"))\r\n          {\r\n              installer();\r\n          }\r\n        });        \r\n      }\r\n      const onError = (err) => {\r\n        console.log(err);\r\n      }\r\n      let m_type;\r\n      this.file.resolveLocalFilesystemUrl(this.dest)\r\n      .then((entry: FileEntry) => {\r\n        return new Promise((resolve, reject) => {\r\n          entry.file(meta => resolve(meta), error => reject(error));\r\n        });\r\n      })\r\n      .then((meta: IFile) => {        \r\n        m_type = meta.type; // This is a value compatible with the 'Content-Type' HTTP header\r\n        console.log(m_type);\r\n        this.fileOpener.open(this.dest, m_type)\r\n        .then(() => console.log('File is opened'))\r\n        .catch(e => console.log('Error opening file', e));\r\n        // this.document.viewDocument(this.dest, m_type, options, onShow, onClose, onMissingApp, onError);\r\n      })      \r\n    }, (error) => {\r\n      this.translate.get(\"COMMONS.DOWNLOADERROR\").subscribe(res => {\r\n        this.presentToast(this.contentDetail.ContentTitle + ' ' + res);\r\n      });\r\n    })\r\n    .catch(err => {\r\n      this.translate.get(\"COMMONS.DOWNLOADERROR\").subscribe(res => {\r\n        this.presentToast(this.contentDetail.ContentTitle + ' ' + res);\r\n      });\r\n    });\r\n  }\r\n\r\n  page: number = 0;\r\n  comments: any = [];\r\n\r\n  doRefresh(refresher?: Refresher){\r\n    if(this.infiniteScroll){\r\n      this.infiniteScroll.enable(true);\r\n    }\r\n    this.taptic.impact({ style: 'light' }); \r\n    this.vibrate();\r\n    this.contentProvider.getContentByID(this.contentId)\r\n    .finally(() => refresher.complete())\r\n    .subscribe(res => {\r\n      this.contentDetail = res.ResponseData;\r\n      this.singleComponentLikeComponent.getLikeCount();\r\n    })\r\n    this.page = 1;\r\n    this.comments = [];\r\n    this.contentProvider.getContentComments(this.contentId, this.page)\r\n      .subscribe(res => {\r\n        this.handleComments(res);\r\n      })\r\n  }\r\n\r\n  getComments(infiniteScroll?: InfiniteScroll){\r\n    if(infiniteScroll){\r\n      this.infiniteScroll = infiniteScroll;\r\n    }\r\n    if (this.comments.length == 0 && infiniteScroll){\r\n      infiniteScroll.enable(false);\r\n    }\r\n    if (this.comments.length >= 0 && this.comments.length < 10 && infiniteScroll){\r\n      infiniteScroll.enable(false);\r\n    }\r\n    this.page++;\r\n\r\n    this.contentProvider.getContentComments(this.contentId, this.page)\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        }\r\n      })\r\n      .do(response => {\r\n        if (!response.ResponseData && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n          this.page--; // Restore page back to the last correct page\r\n        }\r\n      })\r\n      .subscribe(res => {\r\n        this.handleComments(res);\r\n        if (res.ResponseData && res.ResponseData.length < 10 && infiniteScroll){\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n  }\r\n\r\n  private handleComments(response) {\r\n    if (response.ResponseData){\r\n      this.comments = this.comments.concat(response.ResponseData);\r\n      this.comments = this.contentProvider.getNestedChildren(this.comments, 0);\r\n    }\r\n  }\r\n\r\n  getTitle(){\r\n    return \"TITLES.File\";\r\n  }\r\n\r\n  openModal($event?) {\r\n    let data = {\r\n      entity: this.contentDetail,\r\n    };\r\n    if ($event){\r\n      data['parentComment'] = $event;\r\n    }\r\n    let modal = this.modalCtrl.create(CommentModalComponent, data);\r\n    modal.present();\r\n    modal.onDidDismiss(data => {\r\n      this.comments = data.comments;\r\n      this.contentDetail.CommentCount += data.count;\r\n    });\r\n  }\r\n\r\n  openMoveModal() {\r\n    let data = {\r\n      SpaceID: this.contentDetail.SpaceID,\r\n    };\r\n    console.log(data);\r\n    let modal = this.modalCtrl.create(FolderSelectModalComponent, data);\r\n    modal.present();\r\n    modal.onDidDismiss(data => {\r\n      if(data != undefined) {\r\n        const saveloader = this.loadingCtrl.create({      \r\n        });      \r\n        saveloader.present();\r\n        this.contentProvider.move(this.contentId, data.ID)\r\n        .finally(()=>{\r\n          saveloader.dismiss();\r\n        })\r\n        .subscribe((res)=>{\r\n          if(res.IsError == false) {\r\n            this.translate.get(\"EXTRA.MOVED\").subscribe(res => {\r\n              this.presentToast(res);\r\n              this.navCtrl.pop();\r\n            });\r\n          } else {\r\n            this.translate.get(\"EXTRA.MOVEFAILED\").subscribe(res => {\r\n              this.presentToast(res);\r\n            });\r\n          }\r\n        })\r\n      }\r\n    });\r\n  }\r\n\r\n  isImage(){\r\n    if(!this.contentDetail){\r\n      return false;\r\n    }\r\n    let extArr = [\"jpg\", \"jpeg\", \"png\", \"svg\", \"ico\"];\r\n    let ext = this.contentDetail.ContentTitle.split(\".\");\r\n    ext = ext[ext.length - 1];\r\n    for (let i = 0; i < extArr.length; ++i){\r\n      if(ext.toLowerCase() === extArr[i].toLowerCase()){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  \r\n  checkPdf() {\r\n    let ext = this.contentDetail.ContentTitle.split(\".\");\r\n    ext = ext[ext.length - 1];\r\n    if(ext.toLowerCase() === 'pdf') {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  deleteFile() {\r\n    this.translate.get([\"EXTRA.DELETEFILE\", \"EXTRA.AREYOUSURETODELETE\", \"COMPONENT.CANCEL\", \"TOAST.OK\"]).subscribe((res) => {\r\n      let alert = this.alertCtrl.create({\r\n        title: res['EXTRA.DELETEFILE'],\r\n        message: res['EXTRA.AREYOUSURETODELETE'],\r\n        buttons: [\r\n          {\r\n            text: res['COMPONENT.CANCEL'],\r\n            role: 'cancel',\r\n            handler: () => {\r\n              console.log('Cancel clicked');\r\n            }\r\n          },\r\n          {\r\n            text: res['TOAST.OK'],\r\n            handler: () => {\r\n              const saveloader = this.loadingCtrl.create({      \r\n              });      \r\n              saveloader.present();\r\n              this.contentProvider.deleteFile(this.contentId)\r\n              .finally(()=>{\r\n                saveloader.dismiss();\r\n              })\r\n              .subscribe((res) => {\r\n                if(res.IsError == false) {\r\n                  this.translate.get(\"EXTRA.FILEDELETED\").subscribe(res => {\r\n                    this.presentToast(res);\r\n                    this.navCtrl.pop();\r\n                  });\r\n                } else {\r\n                  this.translate.get(\"EXTRA.FILEDELETEDFAILED\").subscribe(res => {\r\n                    this.presentToast(res);\r\n                  });\r\n                }\r\n              })\r\n            }\r\n          },\r\n        ]\r\n      });\r\n      alert.present();\r\n    });\r\n    \r\n  }\r\n\r\n  navToList(){\r\n    let active = this.navCtrl.getActive();\r\n    let parent = this.navCtrl.getPrevious();\r\n    if(this.contentDetail.SpaceID === 0){\r\n      this.navCtrl.push(\"file-list\", {\r\n        title: this.contentDetail.ReportedByUserName,\r\n        UserID: this.contentDetail.UserID\r\n      }, {\r\n        direction: \"back\"\r\n      });\r\n    } else {\r\n      this.navCtrl.push(\"file-list\", {\r\n        title: this.contentDetail.SpaceName,\r\n        SpaceID: this.contentDetail.SpaceID\r\n      }, {\r\n        direction: \"back\"\r\n      });\r\n    }\r\n    this.navCtrl.removeView(active);\r\n    this.navCtrl.removeView(parent);\r\n  }\r\n\r\n  clickOption() {\r\n    this.translate.get([\"EXTRA.DOWNLOAD\", \"EXTRA.DELETE\", \"EXTRA.COMMENT\", \"EXTRA.MOVE\", \"COMPONENT.CANCEL\"]).subscribe((res) => {\r\n      let buttons = [];\r\n      if(this.p_downLoad) {\r\n        buttons.push({\r\n          text: res['EXTRA.DOWNLOAD'],\r\n          handler: () => {\r\n            this.downloadFile(this.contentDetail.ContentMediaUrl);\r\n          }\r\n        })\r\n      }\r\n      buttons.push({\r\n        text: res['EXTRA.COMMENT'],\r\n        handler: () => {\r\n          this.openModal();\r\n        }\r\n      })\r\n      buttons.push({\r\n        text: res['EXTRA.MOVE'],\r\n        handler: () => {\r\n          this.openMoveModal();\r\n        }\r\n      })\r\n      buttons.push({\r\n        text: res['EXTRA.DELETE'],\r\n        handler: () => {\r\n          this.deleteFile();\r\n        }\r\n      })\r\n      buttons.push({\r\n        text: res['COMPONENT.CANCEL'],\r\n        role: 'cancel'\r\n      })\r\n\r\n      let actionSheet = this.actionSheetCtrl.create({\r\n        title: this.contentDetail.ContentTitle,\r\n        buttons: buttons\r\n      });\r\n\r\n      actionSheet.present();\r\n    });\r\n  }\r\n\r\n  private presentToast(msg) {\r\n    let toast = this.toastCtrl.create({\r\n      message: msg,\r\n      duration: 3000,\r\n      position: 'bottom'\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  getIconName(name: any) {\r\n    if(name == null) return;\r\n    let ext = name.split(\".\");\r\n    ext = ext[ext.length - 1];\r\n    switch(ext.toLowerCase()) {\r\n      case 'jpg':\r\n        return 'jpg.png';\r\n      case 'pdf':\r\n        return 'pdf.jpg';\r\n      case 'doc':\r\n        return 'doc.png';\r\n      case 'docx':\r\n        return 'doc.jpg';\r\n      case 'xsl':\r\n        return 'xsl.jpg';\r\n      case 'ppt':\r\n        return 'ppt.png';\r\n      default:\r\n        return 'other.png';\r\n    }    \r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/files/file-detail/file-detail.ts"],"sourceRoot":""}