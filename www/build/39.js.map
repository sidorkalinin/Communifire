{"version":3,"sources":["../../src/pages/people/profile/profile.module.ts","../../src/pages/people/profile/profile.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfilePage } from './profile';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { PeopleProvider } from '../../../providers/people';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { PipesModule } from '../../../pipes/pipes.modules'\r\nimport { AuthenticationProvider } from '../../../providers/authentication';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProfilePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProfilePage),\r\n    ComponentsModule,\r\n    TranslateModule,\r\n    PipesModule\r\n  ],\r\n  providers: [\r\n    AppCenterAnalytics,\r\n    PeopleProvider,\r\n    AuthenticationProvider\r\n  ]\r\n})\r\nexport class ProfilePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/people/profile/profile.module.ts","import { Component, OnInit } from '@angular/core';\r\nimport { IonicPage, NavParams, InfiniteScroll, NavController, Refresher } from 'ionic-angular';\r\nimport 'rxjs/add/operator/finally';\r\nimport 'rxjs/add/operator/do';\r\n\r\nimport { PeopleProvider } from '../../../providers/people';\r\nimport { Device } from '@ionic-native/device';\r\nimport { AppCenterAnalytics } from '@ionic-native/app-center-analytics';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AuthenticationProvider } from '../../../providers/authentication';\r\n\r\n@IonicPage({\r\n  name: 'profile',\r\n  segment: 'profile/:id'\r\n})\r\n@Component({\r\n  selector: 'page-profile',\r\n  templateUrl: 'profile.html',\r\n})\r\n\r\nexport class ProfilePage implements OnInit {\r\n  private page = 0;\r\n  private userId = this.navParams.get('id');\r\n  profileView: number = 0;\r\n  profile;\r\n  activities = [];\r\n  isLoading: boolean = false;\r\n  isme: boolean = false;\r\n\r\n  buttons = [{\r\n    icon: 'ios-contact',\r\n    text: 'PROFILE.BUTTONGROUP.PROFILE'\r\n  },\r\n  {\r\n    icon: 'ios-list',\r\n    text: 'PROFILE.BUTTONGROUP.ACTIVITY'\r\n  },\r\n  // {\r\n  //   icon: 'ios-chatbubbles',\r\n  //   text: 'PROFILE.BUTTONGROUP.MESSAGE'\r\n  // },\r\n  {\r\n    icon: 'ios-cog',\r\n    text: 'PROFILE.BUTTONGROUP.MORE'\r\n  }];\r\n\r\n  list = [\r\n    {\r\n      id: 3,\r\n      icon: \"file\",\r\n      title: \"Articles\",\r\n      name: \"article-list\"\r\n    },\r\n    {\r\n      id: 4,\r\n      icon: \"files-o\",\r\n      title: \"Blogs\",\r\n      name: \"blog-list\"\r\n    },\r\n    {\r\n      id: 111,\r\n      icon: \"briefcase\",\r\n      title: \"Cases\",\r\n      name: \"case-list\"\r\n    },\r\n    {\r\n      id: 1,\r\n      icon: \"comments\",\r\n      title: \"Discussions\",\r\n      name: \"discussion-list\"\r\n    },\r\n    {\r\n      id: 14,\r\n      icon: \"folder-open\",\r\n      title: \"Files\",\r\n      name: \"file-list\"\r\n    },\r\n    {\r\n      id: 44,\r\n      icon: \"lightbulb-o\",\r\n      title: \"Ideas\",\r\n      name: \"idea-list\"\r\n    },\r\n    {\r\n      id: 18,\r\n      icon: \"picture-o\",\r\n      title: \"Photos\",\r\n      name: \"photo-list\"\r\n    },\r\n    {\r\n      id: 7,\r\n      icon: \"video-camera\",\r\n      title: \"Videos\",\r\n      name: \"video-list\"\r\n    },\r\n    {\r\n      id: 9,\r\n      icon: \"book\",\r\n      title: \"Wiki\",\r\n      name: \"wiki-list\"\r\n    },\r\n  ];\r\n\r\n  constructor(\r\n    public navParams: NavParams,\r\n    private peopleProvider: PeopleProvider,\r\n    public device: Device,\r\n    private navCtrl: NavController,\r\n    private appCenterAnalytics: AppCenterAnalytics,\r\n    public translate: TranslateService,    \r\n    private authenticationProvider: AuthenticationProvider,\r\n  ) {\r\n    if (this.device.model === \"iPhone10,3\" || this.device.model === \"iPhone10,6\" || this.device.model === \"iPhone10;3\" || this.device.model === \"iPhone10;6\") {\r\n      this.isIphoneX = true;\r\n    }\r\n\r\n    this.appCenterAnalytics.isEnabled().then( (b) => {\r\n      if(b){\r\n        this.appCenterAnalytics.trackEvent('Profile Page Load Event.', { profile: this.userId, userid: localStorage.getItem('UserID') }).then(() => {\r\n          console.log('Profile Page Load Event tracked');\r\n        });\r\n      }\r\n    })\r\n   }\r\n  isIphoneX: boolean = false;\r\n\r\n  ngOnInit() {\r\n    this.authenticationProvider.getMyDetails().subscribe(\r\n      user => {\r\n        this.isme = (this.userId == user.UserID);\r\n      });\r\n    this.getUser();\r\n  }\r\n\r\n  goToEntity(item) {\r\n    this.navCtrl.push(item.name, {\r\n      id: item.id,\r\n      title: this.profile['First name'] + \" \" + this.profile['Last name'],\r\n      subTitle: item.title,\r\n      UserID: this.userId,\r\n      profile: true\r\n    });\r\n  }\r\n\r\n  doRefresh(refresh: Refresher){\r\n    this.page = 1;\r\n    this.getUserActivity()\r\n      .finally(() => {\r\n        refresh.complete();\r\n      })\r\n      .subscribe(res => {\r\n        this.activities = [];\r\n        this.handleActivity(res);\r\n      })\r\n  }\r\n\r\n  refreshPage($event) {\r\n    if ($event.result) {\r\n      if (this.activities.length >= 10) {\r\n        this.activities.pop();\r\n      }\r\n      this.activities.unshift($event);\r\n    }\r\n  }\r\n\r\n  switchProfileView(view) {\r\n    this.profileView = view.index;\r\n    if(view.index == 1 && this.activities.length == 0){\r\n      this.doInfinite();\r\n    }\r\n  }\r\n\r\n  private getUser() {\r\n    this.isLoading = true;\r\n\r\n    this.peopleProvider.getUser(this.userId)\r\n      .finally(() => this.isLoading = false)\r\n      .subscribe(res => {\r\n        console.log(res);\r\n        this.profile = res.ResponseData;\r\n      });\r\n  }\r\n\r\n  private getUserActivity() {\r\n    return this.peopleProvider.getUserActivity(this.userId, this.page);\r\n  }\r\n\r\n  private handleActivity(response) {\r\n    this.activities = this.activities.concat(response.ResponseData);\r\n  }\r\n\r\n  doInfinite(infiniteScroll?: InfiniteScroll) {\r\n    if (this.activities.length > 0 && this.activities.length < 10) {\r\n      infiniteScroll.enable(false);\r\n    }\r\n    this.page++;\r\n    this.getUserActivity()\r\n      .finally(() => {\r\n        if (infiniteScroll) {\r\n          infiniteScroll.complete();\r\n        } else {\r\n          this.isLoading = false;\r\n        }\r\n      })\r\n      .do(response => {\r\n        if (!response.ResponseData.length && infiniteScroll) {\r\n          infiniteScroll.enable(false);\r\n          this.page--; // Restore page back to the last correct page\r\n        }\r\n      })\r\n      .subscribe(res => {\r\n        this.handleActivity(res);\r\n        if (infiniteScroll && res.ResponseData.length < 10) {\r\n          infiniteScroll.enable(false);\r\n        }\r\n      })\r\n  }\r\n  manageFriends() {\r\n    this.navCtrl.push('manage-friend');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/people/profile/profile.ts"],"sourceRoot":""}